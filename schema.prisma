datasource db {
  provider = "cockroachdb"
  url      = env("DB_URL")
}

generator cleint {
  provider = "prisma-client-js"
}

model User {
  userId    String       @id @unique
  username  String       @unique
  email     String       @unique
  avatarUrl String?
  servers   UserServer[]
  friends   Json?
  auth      Auth?
}

model Servers {
  serverId Int          @unique
  members  UserServer[]
  channels Json
}

model Auth {
  userId        String @unique
  username      String
  email         String
  password_hash String
  hash          String
  user          User   @relation(fields: [userId], references: [userId])
}

model UserServer {
  userId   String
  serverId Int
  member   Servers @relation(fields: [serverId], references: [serverId])
  user     User    @relation(fields: [userId], references: [userId])

  @@id([userId, serverId])
}
